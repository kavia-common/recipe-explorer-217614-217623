{"is_source_file": true, "format": "Python", "description": "This file implements authentication API endpoints for user signup, login, and token management using FastAPI, JWT, and database integration. It defines schemas, authentication functions, and route handlers related to user authentication.", "external_files": ["src/db/schemas", "src/db/models", "src/db/crud", "src/db/database"], "external_methods": ["get_user_by_email", "get_db"], "published": ["signup", "login", "get_current_user", "create_access_token"], "classes": [{"name": "SignupRequest", "description": "Pydantic schema for user signup request containing email and password."}], "methods": [{"name": "bool verify_password(plain_password: str, password_hash: str)", "description": "Verifies a plaintext password against a stored hash.", "scope": "", "scopeKind": ""}, {"name": "str get_password_hash(password: str)", "description": "Hashes a plaintext password for secure storage.", "scope": "", "scopeKind": ""}, {"name": "Optional[models.User] authenticate_user(db: Session, email: str, password: str)", "description": "Authenticates a user by email and password, returning user if valid.", "scope": "", "scopeKind": ""}, {"name": "_ensure_secret()", "description": "Checks that the JWT secret is configured; raises error if not.", "scope": "", "scopeKind": ""}, {"name": "str create_access_token(data: dict, expires_delta: Optional[timedelta] = None)", "description": "Creates a JWT token with claims and expiration.", "scope": "", "scopeKind": ""}, {"name": "models.User get_current_user( token: str = Depends(oauth2_scheme), db: Session = Depends(get_db), )", "description": "FastAPI dependency that retrieves current user from JWT token.", "scope": "", "scopeKind": ""}, {"name": "schemas.UserPublic signup(body: SignupRequest, db: Session = Depends(get_db))", "description": "Endpoint to register a new user and return user info without sensitive data.", "scope": "", "scopeKind": ""}, {"name": "schemas.Token login( form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db), )", "description": "Endpoint to authenticate a user and issue a JWT token.", "scope": "", "scopeKind": ""}], "calls": ["jwt.encode", "jwt.decode", "get_user_by_email", "db.add", "db.commit", "db.refresh"], "search-terms": ["auth", "JWT", "signup", "login", "OAuth2PasswordBearer", "FastAPI", "user authentication", "token management"], "state": 2, "file_id": 9, "knowledge_revision": 22, "git_revision": "", "ctags": [{"_type": "tag", "name": "ACCESS_TOKEN_EXPIRE_MINUTES", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^ACCESS_TOKEN_EXPIRE_MINUTES: int = int(os.getenv(\"ACCESS_TOKEN_EXPIRE_MINUTES\", \"60\"))$/", "language": "Python", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "JWT_ALGORITHM", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^JWT_ALGORITHM: str = os.getenv(\"JWT_ALGORITHM\", \"HS256\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable"}, {"_type": "tag", "name": "JWT_SECRET", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^JWT_SECRET: str = os.getenv(\"JWT_SECRET\", \"\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable"}, {"_type": "tag", "name": "SignupRequest", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^class SignupRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_ensure_secret", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^def _ensure_secret():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "authenticate_user", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^def authenticate_user(db: Session, email: str, password: str) -> Optional[models.User]:$/", "language": "Python", "typeref": "typename:Optional[models.User]", "kind": "function", "signature": "(db: Session, email: str, password: str)"}, {"_type": "tag", "name": "create_access_token", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^def create_access_token(data: dict, expires_delta: Optional[timedelta] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(data: dict, expires_delta: Optional[timedelta] = None)"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^    email: EmailStr = Field(..., description=\"Email address\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "SignupRequest", "scopeKind": "class"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^def get_current_user($/", "language": "Python", "typeref": "typename:models.User", "kind": "function", "signature": "( token: str = Depends(oauth2_scheme), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "get_password_hash", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^def get_password_hash(password: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(password: str)"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^def login($/", "language": "Python", "typeref": "typename:schemas.Token", "kind": "function", "signature": "( form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "oauth2_scheme", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/login\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^    password: str = Field(..., min_length=6, description=\"Plain text password\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SignupRequest", "scopeKind": "class"}, {"_type": "tag", "name": "pwd_context", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^router = APIRouter(prefix=\"\\/auth\", tags=[\"Auth\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^def signup(body: SignupRequest, db: Session = Depends(get_db)) -> schemas.UserPublic:$/", "language": "Python", "typeref": "typename:schemas.UserPublic", "kind": "function", "signature": "(body: SignupRequest, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "verify_password", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/api/auth.py", "pattern": "/^def verify_password(plain_password: str, password_hash: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(plain_password: str, password_hash: str)"}], "hash": "f3bded89c0d14e97b48092d7528e673e", "format-version": 4, "code-base-name": "recipe_backend", "filename": "recipe_backend/src/api/auth.py", "fields": [{"name": "int ACCESS_TOKEN_EXPIRE_MINUTES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str JWT_ALGORITHM", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str JWT_SECRET", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "EmailStr email", "scope": "SignupRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/login\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str password", "scope": "SignupRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/auth\", tags=[\"Auth\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"22": ""}]}