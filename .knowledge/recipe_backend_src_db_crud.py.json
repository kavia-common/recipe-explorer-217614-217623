{"is_source_file": true, "format": "Python", "description": "This file contains CRUD operations for user and saved recipe data, using SQLAlchemy ORM for database interactions. It includes functions for retrieving, creating, updating, and deleting user and recipe data, along with a stub for password hashing.", "external_files": ["models", "schemas"], "external_methods": ["select", "IntegrityError", "Session.execute", "Session.add", "Session.commit", "Session.refresh", "Session.rollback", "Session.delete"], "published": ["get_user_by_email", "create_user", "list_saved", "upsert_saved", "remove_saved"], "classes": [], "methods": [{"name": "str _hash_password_stub(plain_password: str)", "description": "Temporary placeholder for hashing passwords. Currently reverses the password string and prefixes it, to be replaced with a secure hashing mechanism in the future.", "scope": "", "scopeKind": ""}, {"name": "Optional[models.User] get_user_by_email(db: Session, email: str)", "description": "Retrieves a user from the database by their email address, returning None if not found.", "scope": "", "scopeKind": ""}, {"name": "models.User create_user(db: Session, user_in: schemas.UserCreate)", "description": "Creates a new user with an email and password, hashing the password with a stub method.", "scope": "", "scopeKind": ""}, {"name": "List[models.SavedRecipe] list_saved(db: Session, user_id: int)", "description": "Returns a list of saved recipes for a particular user.", "scope": "", "scopeKind": ""}, {"name": "models.SavedRecipe upsert_saved(db: Session, user_id: int, data: schemas.SavedRecipeCreate)", "description": "Inserts a new saved recipe or updates an existing one for a user, handling race conditions via rollback and re-selection.", "scope": "", "scopeKind": ""}, {"name": "bool remove_saved(db: Session, user_id: int, recipe_id: int)", "description": "Deletes a saved recipe for a user, returning True if deletion occurred.", "scope": "", "scopeKind": ""}], "calls": ["select()", "db.execute()", "db.add()", "db.commit()", "db.refresh()", "db.rollback()", "db.delete()"], "search-terms": ["crud.py", "SQLAlchemy", "user creation", "saved recipes", "upsert", "IntegrityError", "session management"], "state": 2, "file_id": 8, "knowledge_revision": 18, "git_revision": "", "ctags": [{"_type": "tag", "name": "_hash_password_stub", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/db/crud.py", "pattern": "/^def _hash_password_stub(plain_password: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(plain_password: str)"}, {"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/db/crud.py", "pattern": "/^def create_user(db: Session, user_in: schemas.UserCreate) -> models.User:$/", "language": "Python", "typeref": "typename:models.User", "kind": "function", "signature": "(db: Session, user_in: schemas.UserCreate)"}, {"_type": "tag", "name": "get_user_by_email", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/db/crud.py", "pattern": "/^def get_user_by_email(db: Session, email: str) -> Optional[models.User]:$/", "language": "Python", "typeref": "typename:Optional[models.User]", "kind": "function", "signature": "(db: Session, email: str)"}, {"_type": "tag", "name": "list_saved", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/db/crud.py", "pattern": "/^def list_saved(db: Session, user_id: int) -> List[models.SavedRecipe]:$/", "language": "Python", "typeref": "typename:List[models.SavedRecipe]", "kind": "function", "signature": "(db: Session, user_id: int)"}, {"_type": "tag", "name": "remove_saved", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/db/crud.py", "pattern": "/^def remove_saved(db: Session, user_id: int, recipe_id: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(db: Session, user_id: int, recipe_id: int)"}, {"_type": "tag", "name": "upsert_saved", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217623/recipe_backend/src/db/crud.py", "pattern": "/^def upsert_saved(db: Session, user_id: int, data: schemas.SavedRecipeCreate) -> models.SavedReci/", "language": "Python", "typeref": "typename:models.SavedRecipe", "kind": "function", "signature": "(db: Session, user_id: int, data: schemas.SavedRecipeCreate)"}], "hash": "82c865c09f4eb02caa3dd6f93de45ffe", "format-version": 4, "code-base-name": "recipe_backend", "filename": "recipe_backend/src/db/crud.py", "revision_history": [{"18": ""}]}